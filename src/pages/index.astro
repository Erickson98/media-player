---
import Layout from "../layouts/Layout.astro";
const album = await fetch(
  `${Astro.url.origin}/api/album_1CHUXwuge9A7L2KiA3vnR6.json`
).then((r) => r.json());
function formatDuration(ms: number) {
  const minutes = Math.floor(ms / 60000);
  const seconds = Math.floor((ms % 60000) / 1000);
  return `${minutes}:${seconds.toString().padStart(2, "0")}`;
}
---

<Layout>
  <div slot="central-panel">
    <html lang="es">
      <style>
        body {
          font-family: Arial, sans-serif;
          background-color: #121212;
          color: #fff;
          margin: 0;
          padding: 0;
        }

        .album-container {
          max-width: 900px;
          margin: 20px auto;
          padding: 20px;
        }

        .album-header {
          display: flex;
          align-items: center;
          margin-bottom: 20px;
        }

        .album-cover {
          width: 200px;
          height: 200px;
          border-radius: 8px;
          margin-right: 20px;
        }

        .album-info {
          display: flex;
          flex-direction: column;
          justify-content: center;
        }

        .album-title {
          font-size: 24px;
          font-weight: bold;
        }

        .album-artist {
          color: #b3b3b3;
          margin-top: 5px;
        }

        .album-controls {
          margin-top: 15px;
        }

        .btn-play {
          background-color: #1db954;
          border: none;
          border-radius: 50%;
          width: 50px;
          height: 50px;
          font-size: 20px;
          cursor: pointer;
          margin-right: 10px;
        }

        .btn-icon {
          background: none;
          border: none;
          color: #fff;
          font-size: 20px;
          cursor: pointer;
          margin-right: 10px;
        }

        .track-list {
          width: 100%;
          border-collapse: collapse;
        }

        .track-list th,
        .track-list td {
          text-align: left;
          padding: 10px;
          border-bottom: 1px solid #333;
        }

        .track-title {
          display: flex;
          flex-direction: column;
        }

        .track-name {
          font-weight: bold;
        }

        .track-artist {
          font-size: 12px;
          color: #b3b3b3;
        }
      </style>
      <body>
        <div class="album-container">
          <div class="album-header">
            <img
              src={album.images[1].url}
              alt="Album Cover"
              class="album-cover"
              width="60"
            />
            <div class="album-info">
              <h2 class="album-title">
                {album.name}
              </h2>
              <p class="album-artist">
                Michael Giacchino • 2004 • 19 songs, 55 min 21 sec
              </p>
              <div class="album-controls">
                <button class="btn-play">▶</button>
                <button class="btn-icon">❤️</button>
              </div>
            </div>
          </div>

          <table class="track-list">
            <thead>
              <tr>
                <th>#</th>
                <th>Title</th>
                <th>⏱</th>
              </tr>
            </thead>
            <tbody>
              {
                album.tracks.items.map((track) => (
                  <tr>
                    <td>{track.track_number}</td>
                    <td>
                      <div class="track-title">
                        <span class="track-name">{track.name}</span>
                        <span class="track-artist">
                          {track.artists.map((a) => a.name).join(", ")}
                        </span>
                      </div>
                    </td>

                    <td>{formatDuration(track.duration_ms)}</td>
                  </tr>
                ))
              }
              <!-- <tr>
                <td>1</td>
                <td>
                  <div class="track-title">
                    <span class="track-name">The Glory Days</span>
                    <span class="track-artist">Michael Giacchino</span>
                  </div>
                </td>
                <td>12,205,430</td>
                <td>3:32</td>
              </tr>
              <tr>
                <td>2</td>
                <td>
                  <div class="track-title">
                    <span class="track-name">Mr. Huph Will See You Now</span>
                    <span class="track-artist">Michael Giacchino</span>
                  </div>
                </td>
                <td>1,241,382</td>
                <td>1:35</td>
              </tr> -->
            </tbody>
          </table>
        </div>
      </body>
    </html>
  </div>
  <div slot="right-panel">HELLO</div>
</Layout>
