---
const { tracks } = Astro.props;
function formatDuration(ms: number) {
  const m = Math.floor(ms / 60000);
  const s = Math.floor((ms % 60000) / 1000)
    .toString()
    .padStart(2, "0");
  return `${m}:${s}`;
}
---

<div style="display: flex; gap:5px;">
  <div style="flex:0.8">
    <h2>Top Results</h2>
    <div style="padding: 20px; border-radius: 7px; background: #3a3a3a57;">
      <img
        src={tracks?.items[0]?.album?.images[0]?.url}
        alt=""
        srcset=""
        width="92"
        height="92"
      />
      <h2>{tracks?.items[0]?.name}</h2>
      <span
        >Song * {
          tracks?.items[0]?.artists.map((artist) => (
            <a
              href={`/artist/${artist.id}`}
              target="_blank"
              rel="noopener noreferrer"
            >
              {artist?.name}
            </a>
          ))
        }</span
      >
    </div>
  </div>
  <div style="flex:1;padding-right: 10px;">
    <h2>Songs</h2>
    <ul
      style="display: flex; flex-direction: column; gap:15px;padding:10px;margin:0px;"
    >
      {
        tracks.items.slice(0, 4).map((track) => (
          <li style="display:flex;width: 100%;gap: 10px;">
            <img
              src={track?.album?.images[0]?.url}
              alt=""
              srcset=""
              width="40"
              height="40"
            />
            <div style="justify-content: space-between;display: flex;flex: 1;">
              <div style="display: flex; flex-direction: column;">
                <span>{track?.name}</span>
                <span>{track?.artists?.map((a) => a?.name).join(", ")}</span>
              </div>
              <span>{formatDuration(track?.duration_ms)}</span>
            </div>
          </li>
        ))
      }
    </ul>
  </div>
</div>
