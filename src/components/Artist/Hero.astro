---
import { formatFollowers } from "src/utils/FormatFollowersOpts";

const { artist } = Astro.props;
const hasData = !!artist?.name;
let followers = artist?.followers?.total
  ? formatFollowers(artist.followers.total)
  : null;
---

<!doctype html>
<html lang="es">
  <head>
    <link rel="stylesheet" href="Hero.css" />
    <style>
      .skeleton {
        background: linear-gradient(
          90deg,
          #2a2a2a 25%,
          #3a3a3a 50%,
          #2a2a2a 75%
        );
        background-size: 200% 100%;
        animation: shimmer 1.2s infinite;
      }

      @keyframes shimmer {
        100% {
          background-position: -200% 0;
        }
      }

      .skeleton-circle {
        border-radius: 50%;
      }

      .skeleton-text {
        border-radius: 4px;
        height: 1em;
      }
    </style>
  </head>
  <body>
    <div class="artist-banner" id="banner">
      <div
        class="artist-banner__bg-fallback"
        id="bg-fallback"
        aria-hidden="true"
      >
      </div>

      {
        hasData ? (
          <img
            id="avatar"
            class="artist-banner__avatar"
            src={artist.images[0].url}
            alt={artist.name}
            width="180"
            height="180"
            loading="lazy"
            decoding="async"
          />
        ) : (
          <div
            class="artist-banner__avatar skeleton skeleton-circle"
            style="width:180px; height:180px;"
          />
        )
      }

      <div class="artist-banner__body">
        {
          hasData ? (
            <>
              <h1 class="artist-banner__name">{artist.name}</h1>
              <p class="artist-banner__stats">{followers} Followers</p>
            </>
          ) : (
            <>
              <div
                class="skeleton skeleton-text"
                style="width: 220px; height: 28px; margin-bottom: 12px;"
              />
              <div
                class="skeleton skeleton-text"
                style="width: 150px; height: 18px;"
              />
            </>
          )
        }
      </div>
    </div>
  </body>
</html>
